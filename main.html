<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Main</title>
    <link rel="stylesheet" href="assets/fontawesome/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <link rel="stylesheet" href="/css/main.css" />
    <link rel="stylesheet" href="/css/header.css" />
    <link rel="stylesheet" href="/css/market.css" />
    <link rel="stylesheet" href="/css/history.css" />
    <link rel="stylesheet" href="/css/watchlist.css" />
    <link rel="stylesheet" href="/css/management.css" />
    <link rel="stylesheet" href="/css/placeorder.css" />
    <link rel="stylesheet" href="/css/footer.css" />

    <meta name="viewport" content="width=device-width,initial-scale=1" />
  </head>
  <body class="container-fluid h-100 d-flex flex-column">
    <header class="d-flex">
      <img src="assets/pt_trial.a0934fd1.svg" alt="logo">

      <!-- Header content -->
      <div class="flex-grow-1 d-flex justify-content-start align-items-center">
        <!-- Header clock -->
        <div id="vn-clock" class="pe-4">
          <span id="vn-time" class="d-inline-block color-primary fw-bold">10:10:10</span>
          <span id="vn-date" class="color-primary">2022/2/2</span>
        </div>

        <!-- Navigation -->
        <nav class="pe-4">
          <ul class="nav">
            <li class="bd-left px-2">
              <a href="/main.html" class="selected">Main page</a>
            </li>
            <li class="bd-left px-2">
              <a href="/assets.html">Assets</a>
            </li>
            <li class="bd-left bd-right px-2">
              <a href="/guide.html">Guide</a>
            </li>
          </ul>
        </nav>

        <!-- Profit - Loss -->
        <div id="profit-loss">
          <span id="profit-loss-value" class="pe-3">
            <span class="color-primary">Profit/Loss:</span>
            <span>0</span>
          </span>

          <span id="derivative-masters" class="badge">
            <a href="/derivative-masters.html" class="text-white fw-normal">
              <i class="fa-solid fa-trophy"></i>
              Derivative Masters
            </a>
          </span>
        </div>

        <!-- Account menu -->
        <div id="account-menu" class="d-flex align-items-center">
          <div>TRIAL VERSION</div>
          <div id="upgrade-account" class="badge mx-3">
            <a href="/upgrade.html" class="text-white fw-normal">Upgrade Account</a>
          </div>

          <div id="my-account" class="drop-down" role="button">
            <!-- Dropdown toggler -->
            <div class="drop-down-toggle">
              <span class="px-2">
                <i class="fa-solid fa-user"></i>
                <span id="user-fullname" class="px-1">Nguyễn Việt Minh Nghĩa</span>
                <i class="fa-solid fa-caret-down"></i>
              </span>

              <!-- Dropdown menu -->
              <!-- Menu INSIDE .drop-down-toggle to keep :hover state
                   when the mouse move to the menu -->
              <!-- TODO: decide on hover vs click and streamline everything -->
              <ul class="drop-down-menu">
                <li>
                  <i class="fa-solid fa-arrow-right-from-bracket"></i>
                  <a>Logout</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </header>
    <div class="row flex-grow-1">
      <div id="col1" class="col-md-8 px-0 d-flex flex-column">
        <!-- Main chart, currently not rendered due to CORS? -->
        <iframe
          id="chart"
          title="Chart"
          src="https://dchart.vndirect.com.vn/charting_library/static/en-tv-chart.aaac22e21df68f2f7bad.html#symbol=VN30F1M&interval=1&widgetbar=%7B%22details%22%3Afalse%2C%22watchlist%22%3Afalse%2C%22watchlist_settings%22%3A%7B%22default_symbols%22%3A%5B%5D%7D%7D&timeFrames=%5B%7B%22text%22%3A%225y%22%2C%22resolution%22%3A%22W%22%7D%2C%7B%22text%22%3A%221y%22%2C%22resolution%22%3A%22W%22%7D%2C%7B%22text%22%3A%223m%22%2C%22resolution%22%3A%22D%22%7D%2C%7B%22text%22%3A%221m%22%2C%22resolution%22%3A%22D%22%7D%2C%7B%22text%22%3A%225d%22%2C%22resolution%22%3A%225%22%7D%2C%7B%22text%22%3A%221d%22%2C%22resolution%22%3A%221%22%7D%5D&locale=en&uid=tradingview_ebc5f&clientId=vnds_trading_view&userId=vnds-0001542070&chartsStorageUrl=https%3A%2F%2Fchart-api.vndirect.com.vn&chartsStorageVer=1.1&debug=false&timezone=Asia%2FBangkok&ssreqdelay=400&theme=Dark"
        ></iframe>

        <!-- Market chart -->
        <div id="market" class="d-flex flex-column">
          <iframe
            id="market-chart-box"
            class="flex-grow-1"
            title="Leader - Lagger chart"
            src="https://mkw.vndirect.com.vn/leader_lagger?color=gray"
          ></iframe>
          <ul id="market-menu" class="d-flex justify-content-end align-items-center no-bullet bd-top mb-0">
            <li id="market-intraday" role="button">INTRADAY</li>
            <li id="market-vn30" role="button">VN30</li>
            <li id="market-leader-lagger" class="selected" role="button"><i class="fa-solid fa-chart-bar"></i></li>
            <li id="market-pie" role="button"><i class="fa-solid fa-chart-pie"></i></li>
          </ul>
        </div>
      </div>
      <div id="col2" class="col-md-2 px-0 d-flex flex-column">
        <div id="history" class="flex-grow-3">
          <!-- Summary -->
          <div id="summary" class="bd-bottom d-flex">
            <div id="futures" class="fw-bold d-flex align-items-center flex-grow-1">VN30F2201</div>
            <div id="floor">
              <span>Floor:</span>
              <br />
              <span>1400</span>
            </div>
            <div id="reference">
              <span>Reference:</span>
              <br />
              <span>1500</span>
            </div>
            <div id="ceil">
              <span>Ceil:</span>
              <br />
              <span>1600</span>
            </div>
          </div>

          <!-- Table selector -->
          <ul class="nav nav-fill">
            <li class="nav-item">
              <a id="price-step" class="nav-link active" href="#">Price step</a>
            </li>
            <li class="nav-item">
              <a id="trading-history" class="nav-link" href="#">Trading history</a>
            </li>
          </ul>

          <!-- Price step table -->
          <table id="price-step-table">
            <thead>
              <tr>
                <th id="buy-quantity" scope="col">Buy Qty</th>
                <th id="buy-price" class="bd-right" scope="col">Buy Price</th>
                <th id="sell-price" scope="col">Sell Price</th>
                <th id="sell-quantity" scope="col">Sell Qty</th>
              </tr>
            </thead>
            <tbody></tbody>

            <!-- Row template -->
            <template>
              <tr class="bd-bottom">
                <td><span></span></td>
                <td class="bd-right" style="position: relative">
                  <span></span>
                  <div class="price-step-cell-bg" style="right: 0"></div>
                </td>
                <td style="position: relative">
                  <span></span>
                  <div class="price-step-cell-bg" style="left: 0"></div>
                </td>
                <td><span></span></td>
              </tr>
            </template>
          </table>

          <!-- Trading history table -->
          <table id="trading-history-table" class="d-none">
            <thead>
              <tr>
                <th scope="col">Time</th>
                <th scope="col">Price</th>
                <th scope="col">+/-</th>
                <th scope="col">Qty</th>
                <th scope="col">Agg</th>
              </tr>
            </thead>
            <tbody></tbody>

            <!-- Row template -->
            <template>
              <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
            </template>
          </table>
        </div>
        <div id="watchlist" class="flex-grow-2">
          <table id="watchlist-table">
            <colgroup>
              <col width="25%" />
              <col width="18%" />
              <col width="16%" />
              <col width="16%" />
              <col width="25%" />
            </colgroup>

            <thead>
              <tr>
                <th scope="col">Symbol</th>
                <th scope="col">Price</th>
                <th scope="col">
                  <i class="fa-solid fa-caret-left" role="button"></i>
                  <span class="d-inline-block text-center">+/-</span>
                  <i class="fa-solid fa-caret-right" role="button"></i>
                </th>
                <th scope="col">Spread</th>
                <th scope="col">Total Qty</th>
              </tr>
            </thead>
            <tbody></tbody>

            <!-- Row template -->
            <template>
              <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
            </template>
          </table>
        </div>
      </div>
      <div id="col3" class="col-md-2 px-0 d-flex flex-column">
        <div id="management" class="flex-grow-1">
          <div id="panel-title" class="d-flex align-items-center">
            <!-- Refresh or close the panel -->
            <div id="panel-control">
              <i id="panel-refresh" class="fa-solid fa-rotate" role="button"></i>
              <i id="panel-minimize" class="fa-solid fa-minus" role="button"></i>
            </div>

            <div id="panel-title-content" class="flex-grow-1 order-first">
              <div id="panel-title-orderbook" class="table-selector">
                <a id="day-order" class="selected">Intraday order</a>
                <a id="conditional-order">Conditional order</a>
              </div>

              <div id="panel-title-portfolio" class="table-selector d-none">
                <a id="open-positions" class="selected">Open Positions</a>
                <a id="closing-positions">Closing Positions</a>
              </div>

              <div id="panel-title-assets" class="d-none color-primary fw-bold">
                <a href="/assets-info">
                  <span>Assets info</span>
                  <i class="fa-solid fa-arrow-up-right-from-square"></i>
                </a>
              </div>
            </div>
          </div>

          <div id="panel-content">
            <div id="orderbook">
              <!-- Intraday order table -->
              <table id="intraday-order-table">
                <thead>
                  <tr>
                    <th scope="col">Order</th>
                    <th scope="col">Symbol</th>
                    <th scope="col">Quantity</th>
                    <th scope="col">Price</th>
                    <th scope="col">WTF</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>

              <!-- Conditional order table -->
              <table id="conditional-order-table" class="d-none">
                <thead>
                  <tr>
                    <th scope="col">Order</th>
                    <th scope="col">Symbol</th>
                    <th scope="col">Trigger Price</th>
                    <th scope="col">Quantity</th>
                    <th scope="col">Price</th>
                    <th scope="col">Expiration Date</th>
                    <th scope="col">WTF</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>

            <div id="portfolio" class="d-none">
              <!-- Open positions table -->
              <table id="open-positions-table">
                <thead>
                  <tr>
                    <th scope="col">Symbol</th>
                    <th scope="col">Quantity</th>
                    <th scope="col">Price</th>
                    <th scope="col">Current Price</th>
                    <th scope="col">+/-</th>
                  </tr>
                </thead>
              </table>

              <table id="closing-positions-table" class="d-none">
                <thead>
                  <tr>
                    <th scope="col">Symbol</th>
                    <th scope="col">Quantity</th>
                    <th scope="col">Buy Price</th>
                    <th scope="col">Sell Price</th>
                    <th scope="col">Profit/Loss</th>
                  </tr>
                </thead>
              </table>
            </div>

            <div id="assets" class="d-none">
              <table id="assets-summary">
                <tbody>
                  <tr class="bd-top">
                    <th scope="row">Net Worth</th>
                    <td>12345678</td>
                  </tr>
                  <tr class="bd-top">
                    <th scope="row">Margin</th>
                    <td>12345678</td>
                  </tr>
                  <tr class="bd-top bd-bottom">
                    <th scope="row">Tax & Fee</th>
                    <td>12345678</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Place Order panel -->
        <div id="placeorder" class="p-2">
          <div id="error-banner" class="d-none my-1 text-center">
            Create an account at VNDirect to place this order
          </div>

          <!-- Order types, each has its own form form. -->
          <fieldset class="d-flex justify-content-between align-items-center mb-3">
            <legend class="col-form-label">Order Type:</legend>
            <div class="form-check form-check-inline">
              <input type="radio" name="order-type" id="normal-order" class="form-check-input" checked/>
              <label class="form-check-label" for="normal-order">Normal</label>
            </div>
            <div class="form-check form-check-inline">
              <input type="radio" name="order-type" id="stop-order" class="form-check-input"/>
              <label class="form-check-label" for="stop-order">Stop</label>
            </div>
            <div class="form-check form-check-inline">
              <input type="radio" name="order-type" id="trailing-order" class="form-check-input" disabled/>
              <label class="form-check-label" for="trailing-order">Trailing</label>
            </div>
            <div class="form-check form-check-inline">
              <input type="radio" name="order-type" id="oso-order" class="form-check-input" disabled/>
              <label class="form-check-label" for="oso-order">OSO</label>
            </div>
          </fieldset>

          <!-- The forms below each has 2 submit buttons: Buy, Sell.
          They have the same name attribute. Upon submission, the server
          can check which one was clicked. -->

          <!-- Normal order form -->
          <form id="normal-order-form" method="post" action="/order/normal">
            <!-- Symbol -->
            <div class="row my-2">
              <div class="col-3">
                <label for="symbol-normal" class="col-form-label">Symbol:</label>
              </div>
              <div class="col-9">
                <select id="symbol-normal" class="form-control" name="symbol">
                  <option value="" selected>-- Please choose a symbol --</option>
  
                  <template>
                    <option></option>
                  </template>
                </select>
              </div>
            </div>

            <!-- Price -->
            <!-- TODO: use tooltips -->
            <div class="row my-2">
              <div class="col-3">
                <label for="price-normal" class="col-form-label">Price:</label>
              </div>
              <div class="col-9">
                <select id="price-normal" class="form-control" name="price">
                  <option value="" disabled selected>-- Please choose a price --</option>
                  <option value="ATO">ATO</option>
                  <option value="ATC">ATC</option>
                  <option value="MTL">MTL</option>
                  <option value="MOK">MOK</option>
                  <option value="MAK">MAK</option>
                </select>
              </div>
            </div>

            <!-- Quantity -->
            <div class="row my-2">
              <div class="col-3">
                <label for="quantity-normal" class="col-form-label">Quantity:</label>
              </div>
              <div class="col-9">
                <input id="quantity-normal" class="form-control" name="quantity" type="number" min="0" placeholder="Quantity" />
              </div>
            </div>

            <!-- Save -->
            <div class="row my-2">
              <div class="col-3">
                <label for="save" class="form-check-label">Save order:</label>
              </div>
              <div class="col-9">
                <input id="save" class="form-check-input" name="save" type="checkbox" />
              </div>
            </div>

            <!-- Buy/Sell -->
            <div class="buy-sell row mb-2 mt-3 justify-content-center">
              <div class="col-auto">
                <button class="btn mx-1 fw-bold text-white rounded-5" role="button" name="action" value="buy">BUY</button>
                <button class="btn mx-1 fw-bold text-white rounded-5" role="button" name="action" value="sell">SELL</button>
              </div>
            </div>
          </form>

          <!-- Stop order form -->
          <form id="stop-order-form" method="post" action="/order/stop" class="d-none">
            <!-- Symbol -->
            <div class="row my-2">
              <div class="col-3">
                <label for="symbol-stop" class="col-form-label">Symbol:</label>
              </div>
              <div class="col-9">
                <select id="symbol-stop" class="form-control" name="symbol">
                  <option value="" selected>-- Please choose a symbol --</option>
  
                  <template>
                    <option></option>
                  </template>
                </select>
              </div>
            </div>

            <!-- Price -->
            <div class="row my-2">
              <div class="col-3">
                <label for="price-stop" class="col-form-label">Price:</label>
              </div>
              <div class="col-9">
                <input id="price-stop" class="form-control text-uppercase" name="price" type="text" placeholder="Price">
              </div>
            </div>

            <!-- Quantity -->
            <div class="row my-2">
              <div class="col-3">
                <label for="quantity-stop" class="col-form-label">Quantity:</label>
              </div>
              <div class="col-9">
                <input id="quantity-stop" class="form-control" name="quantity" type="text" placeholder="Quantity">
              </div>
            </div>

            <!-- Trigger price -->
            <div class="row my-2">
              <div class="col-3">
                <label for="trigger-price" class="col-form-label">Trigger price</label>
              </div>
              <div class="col-9 d-flex">
                <div class="me-2">
                  <!-- label must be after input in this case and the case below -->
                  <input id="price-lower" class="d-none" name="trigger-condition" value="lower" type="radio" checked/>
                  <label for="price-lower" class="d-inline-block text-center border border-1 rounded-3" role="button">≤</label>
                </div>
                <div class="me-3">
                  <input id="price-higher" class="d-none" name="trigger-condition" value="higher" type="radio"/>
                  <label for="price-higher" class="d-inline-block text-center border border-1 border-white rounded-3" role="button">≥</label>
                </div>
                <div class="flex-grow-1">
                  <input id="trigger-price" class="form-control" name="trigger-price" type="text" placeholder="Trigger Price">
                </div>
              </div>
            </div>

            <!-- Expiration -->
            <div class="row my-2">
              <div class="col-3">
                <label for="expiration" class="col-form-label">Expiration:</label>
              </div>
              <div class="col-9">
                <input id="expiration" class="form-control" name="expiration" type="date">
              </div>
            </div>

            <!-- Buy/Sell -->
            <div class="buy-sell row mb-2 mt-3 justify-content-center">
              <div class="col-auto">
                <button class="btn mx-1 fw-bold text-white rounded-5" role="button" name="action" value="buy">BUY</button>
                <button class="btn mx-1 fw-bold text-white rounded-5" role="button" name="action" value="sell">SELL</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <footer class="d-flex row mx-0">
      <!-- TODO: consistent naming scheme for selector & content -->
      <!-- TODO: flex-grow not working? -->
      <div id="select-orderbook" class="col text-center selected" role="button">Orderbook</div>
      <div id="select-portfolio" class="col text-center" role="button">Portfolio</div>
      <div id="select-assets" class="col text-center" role="button">Assets</div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="main.js"></script>
  </body>
</html>
